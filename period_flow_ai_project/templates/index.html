<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Period Flow Predictor</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="card">
    <h1>AI Period Flow Intensity Predictor</h1>
    <h2>let's play a little game using AI!</h2>
    <p class="subtitle">Simple model— Flask + Decision Tree</p>

    <form id="flowForm">
      <label>Cycle Day:</label>
      <input type="number" id="cycle_day" value="3" min="1" max="31" required />

      <label>Cramps (0=None — 3=Severe):</label>
      <input type="number" id="cramps" value="2" min="0" max="3" required />

      <label>Mood (1=Sad, 2=Normal, 3=Happy):</label>
      <input type="number" id="mood" value="2" min="1" max="3" required />

      <label>Bloating (0=No, 1=Yes):</label>
      <input type="number" id="bloating" value="1" min="0" max="1" required />

      <label>Previous Flow (1=Light, 2=Medium, 3=Heavy):</label>
      <input type="number" id="prev_flow" value="2" min="1" max="3" required />

      <button type="submit">Predict</button>
    </form>

    <div id="result" class="result" hidden>
      <h2 id="flowText"></h2>
      <pre id="flowProbs" style="display:none"></pre>
    </div>

    <footer>
      <small>thank you.</small>
    </footer>
  </div>

  <script>
  document.getElementById('flowForm').addEventListener('submit', async function(e){
    e.preventDefault();
    const data = {
      cycle_day: parseInt(document.getElementById('cycle_day').value),
      cramps: parseInt(document.getElementById('cramps').value),
      mood: parseInt(document.getElementById('mood').value),
      bloating: parseInt(document.getElementById('bloating').value),
      prev_flow: parseInt(document.getElementById('prev_flow').value)
    };

    const res = await fetch('/predict', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify(data)
    });
    const j = await res.json();
    if (j.error) {
      alert('Error: ' + j.error);
      return;
    }
    document.getElementById('flowText').innerText = 'Predicted Flow Intensity: ' + j.flow_intensity;
    if (j.probabilities) {
      document.getElementById('flowProbs').style.display='block';
      document.getElementById('flowProbs').innerText = JSON.stringify(j.probabilities, null, 2);
    }
    document.getElementById('result').hidden = false;
  });
  </script>
</body>
</html>
